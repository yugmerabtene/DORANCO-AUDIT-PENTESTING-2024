# DORANCO-AUDIT-PENTESTING-2024  


Prérequis : 
Virtualisation : 
**Installation de virtualbox, telechargement des logiciels prerequis pour la formation*  


Introduction (remise au point):  
![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/386026c3-98ef-4334-a276-b8f288471d51)  

**Virtualisation** :
Imaginez que vous travaillez dans une grande entreprise où il y a plusieurs équipes ayant chacune besoin de serveurs pour leurs applications. Plutôt que d'acheter un serveur physique pour chaque équipe, l'entreprise utilise la virtualisation. Un seul serveur physique est installé, et à l'aide d'un logiciel de virtualisation tel que VMware ou Hyper-V, ce serveur est divisé en plusieurs machines virtuelles (VM). Chaque équipe peut alors disposer de sa propre VM avec son propre système d'exploitation et ses propres applications, tout en partageant les ressources matérielles du serveur physique.
![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/2c31fc47-902b-4c8a-8274-506dbb1f88e0)

**Cloud Computing** :
Maintenant, supposez que l'entreprise décide de déplacer une partie de ses opérations vers le cloud. Plutôt que de maintenir ses propres serveurs physiques, l'entreprise décide d'utiliser les services d'un fournisseur de cloud computing, comme Amazon Web Services (AWS), Microsoft Azure ou Google Cloud Platform. L'entreprise peut alors utiliser des services tels que des serveurs virtuels (instances EC2 sur AWS), du stockage (Amazon S3), ou des bases de données (Amazon RDS), sans avoir à gérer l'infrastructure physique sous-jacente. Par exemple, au lieu de créer et de gérer des VM sur ses propres serveurs, l'entreprise peut louer des serveurs virtuels à la demande dans le cloud, en payant uniquement pour les ressources utilisées.
![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/554a0ef8-d19b-4b83-935b-0ab8ae06ec18)



![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/c31974f5-cd98-4ad7-bfe8-30c2fb644356)  
![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/cd92459d-a0a8-4a44-b1b0-903fcb219997)  
![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/e150a633-2d42-4a3f-b8ee-0ffd722dbaf4)  
![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/352deae1-91db-4869-8b94-b6b65f4ca1d3)  
 ![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/6fcacc81-4e04-4e0e-bb99-c6132667b8f4)  
 ![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/799075c8-d160-4779-9b71-1541136203e2)  

---
Cryptographie :  


La cryptographie symétrique est l'une des plus anciennes techniques cryptographiques connues de l'homme et qui offre encore aujourd'hui un haut niveau de sécurité pour faire face à différentes situations d'utilisation, et tout cela grâce à une clé secrète pour chiffrer et déchiffrer les informations. .
![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/03010bdd-be9c-469b-9366-e4b43beeec5a)  
Parmi les premières méthodes utilisées pour le cryptage des informations figure la cryptographie symétrique. Aussi connu sous le nom la cryptographie de clé secrète ou cryptographie d'une clé. Son nom est parce que cette méthode utilise la même clé pour le chiffrement et le déchiffrement d'un message. Par conséquent, l'expéditeur et le destinataire doivent préalablement s'entendre et connaître la clé à utiliser.

Un bon exemple de ce type de système cryptographique serait le suivant:


Supposons que Maria veuille envoyer un message crypté à Jose. Les deux doivent communiquer au préalable, et se mettre d'accord sur la clé qu'ils vont utiliser. Une fois cela, María peut crypter le message et l'envoyer à José, où il est avec la même clé que María a utilisée, il peut décrypter le message.


Dans la cryptographie symétrique, toute la sécurité est centrée sur les clés. Cela doit donc être secret et difficile à deviner pour une tierce personne. Cependant, avec la technologie dont nous disposons aujourd'hui, le processus de communication ou de distribution de la clé est devenu le point faible de cette méthode. Depuis lors de la communication (l'expéditeur et le destinataire) pour définir et convenir de la clé, un tiers peut intercepter ladite communication, récupérer la clé et accéder aux informations contenues dans le message.

Mais avant de continuer à étudier ces détails, apprenons un peu l'histoire de la cryptographie symétrique.  

La crypto a été développée il y a de nombreuses années. On estime que depuis l'époque de L'Égypte ancienne et l' Empire romain la cryptographie symétrique a été utilisée de manière très basique. Cependant, il a été développé et largement utilisé au cours de la Seconde Guerre mondiale. C'est au cours de ce conflit guerrier que les armées ont utilisé et développé de puissants systèmes cryptographiques symétriques. Tout cela pour encoder les messages et les protéger des ennemis.

Après ces événements, l'ère de la cryptographie symétrique moderne a subi une révolution jusqu'à ce qu'elle atteigne ce que nous savons aujourd'hui. Tout cela grâce au travail de chercheurs et scientifiques dédiés à ce domaine. Cependant, un nom se démarque au-dessus de tous les autres, celui de Claude Shannon. Shannon est connu comme le père de la cryptographie mathématique.  

Les travaux de Shannon se sont développés à partir de 1949, lorsqu'elle a publié un article intitulé Théorie de la communication des systèmes de secret. Cet article décrit la modernisation des techniques de chiffrement connues jusqu'alors, avec des processus mathématiques avancés qui lui ont donné un niveau de complexité et de sécurité plus élevé. Plus tard, il a écrit un livre avec l'informaticien, Warren Weaver. Tout cet ensemble de travaux effectués, est devenu les bases de la cryptographie symétrique moderne.  

![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/0671c4cb-ee67-482b-bca6-fa70e6e3729a)

**Bref historique de son développement et de son évolution**
La première avancée notable de la cryptographie symétrique a été décrite par le troisième président des États-Unis, Thomas Jefferson entre 1790 et 1780. Cela s'appelait roue de chiffrement ou cylindre Jefferson. Il se composait d'un axe qui avait 26 cylindres rotatifs qui avaient les 26 lettres de l'alphabet gravées au hasard.

En utilisant ce curieux appareil, l'expéditeur pouvait écrire le message sur une ligne, puis en choisir une autre pour l'envoyer au destinataire. Ensuite, le récepteur avec un autre cylindre avec la même séquence de disques, a transféré la commande et a cherché la ligne qui avait du sens, déchiffrant le message. Cependant, cette méthode n'a jamais été utilisée au moment de sa création. Mais son concept était si avancé qu'il a servi de base à la cryptographie militaire américaine pendant la Première Guerre mondiale.


![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/f88278f7-905b-4e31-90b9-45027c8ea68e)


Par contre, pendant Seconde Guerre mondiale, L'Allemagne a également réalisé une autre percée dans la crypto symétrique: la création du Machine à énigme. Son fonctionnement était très similaire au cylindre Jefferson, car il utilisait des roues rotatives pour crypter un message. Ils étaient donc pratiquement impossibles à lire sans utiliser une autre machine Enigma. Bien que plus tard, les Alliés aient pu démêler et casser le cryptage de la machine en utilisant les premiers ordinateurs au monde. Ce fait a fini par donner aux Alliés un avantage certain sur le nazisme.

![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/b93ff9c7-84bb-497b-84af-b6845b3bf415)


**L'Ère de l'Informatique :**

Avec l'avènement de l'informatique, les ordinateurs sont devenus des outils essentiels en cryptographie. Cependant, le cryptage et le décryptage sont devenus associés au secret et à l'espionnage, menant à des controverses telles que les CryptoWars, où des agences comme la NSA des États-Unis ont contrôlé et restreint la recherche en cryptographie. Ce blocage a duré des années, jusqu'à ce que IBM développe en 1975 l'algorithme de chiffrement DES, marquant ainsi le début de la cryptographie moderne.


**Méthodes : Algorithmes de Chiffrement Symétrique :**

Depuis lors, les méthodes de cryptage ont évolué. Le DES, premier algorithme informatique, a été remplacé par l'AES après des années d'analyse. L'AES est plus sûr et plus efficace, avec des clés de taille variable et un processus de cryptage en blocs.

![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/e354df7f-eb46-4460-9953-3d5ba8c8edd5)


**Avantages et Inconvénients :**

Le cryptage symétrique offre rapidité et simplicité, idéal pour la protection des données dans les systèmes informatiques actuels. Cependant, il nécessite une distribution sécurisée des clés et reste vulnérable aux attaques par force brute. Malgré ses défauts, il reste largement utilisé, en combinaison avec d'autres méthodes, pour sécuriser nos communications et données sensibles.  


**Chiffrement Asymétrique :**

Le chiffrement asymétrique, aussi connu sous le nom de chiffrement à clé publique, est utilisé pour sécuriser les transactions sur des réseaux tels que Bitcoin, ainsi que pour d'autres transferts de données en ligne, comme les e-mails. Contrairement au chiffrement symétrique, il utilise deux clés distinctes pour l'expéditeur et le destinataire : une clé publique, partagée entre les participants, et une clé privée, détenue uniquement par son propriétaire. Cette méthode offre une sécurité accrue, mais nécessite davantage de ressources.


![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/8889daa4-7a72-44e0-b8de-09f9d2d8038d)    

**Fonctionnement détaillé du Chiffrement Asymétrique :**

Chaque partie d'une transaction génère une paire de clés : une clé publique, accessible à tous, et une clé privée, gardée secrète. L'expéditeur utilise la clé publique du destinataire pour chiffrer la transaction, puis signe numériquement celle-ci avec sa propre clé privée. Les mineurs valident la transaction en utilisant la clé publique, ajoutant ainsi la transaction à un bloc de la blockchain.

**Inconvénients et Solutions :**  



Bien que sécurisé, le chiffrement asymétrique est plus lent et plus intensif en calcul que le chiffrement symétrique, ce qui peut poser problème pour des données volumineuses ou nécessitant une réponse rapide. Les méthodes de chiffrement hybride combinent les avantages des deux approches, utilisant par exemple une clé de session générée de manière aléatoire pour surmonter ces limitations.



**TP-01:**  
**Création d'un algorithme de chiffrement en Java

Class `Main.java` :

```java
import java.util.Base64;

public class Main {

    public static void main(String[] args) throws Exception {
        // Créer une instance de la classe de chiffrement
        SymmetricEncryption symmetricEncryption = new SymmetricEncryption();

        // Le texte à chiffrer
        String plainText = "Bonjour, ceci est un message secret.";

        // Chiffrer le texte
        byte[] encryptedText = symmetricEncryption.encrypt(plainText);

        // Afficher le texte chiffré
        System.out.println("Texte chiffré : " + Base64.getEncoder().encodeToString(encryptedText));

        // Déchiffrer le texte
        String decryptedText = symmetricEncryption.decrypt(encryptedText);

        // Afficher le texte déchiffré
        System.out.println("Texte déchiffré : " + decryptedText);
    }
}
```

Class `SymmetricEncryption.java` :

```java
import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;

public class SymmetricEncryption {

    private SecretKey secretKey;

    public SymmetricEncryption() throws Exception {
        // Générer une clé secrète
        this.secretKey = generateSecretKey();
    }

    // Méthode pour générer une clé secrète AES
    private SecretKey generateSecretKey() throws Exception {
        KeyGenerator keyGen = KeyGenerator.getInstance("AES");
        keyGen.init(128); // Taille de la clé en bits
        return keyGen.generateKey();
    }

    // Méthode pour chiffrer le texte
    public byte[] encrypt(String plainText) throws Exception {
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, this.secretKey);
        return cipher.doFinal(plainText.getBytes());
    }

    // Méthode pour déchiffrer le texte
    public String decrypt(byte[] cipherText) throws Exception {
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.DECRYPT_MODE, this.secretKey);
        byte[] decryptedBytes = cipher.doFinal(cipherText);
        return new String(decryptedBytes);
    }
}
```


### Chiffrement avec OPENSSH : 

### Chiffrement asymétrique (RSA) :

#### Génération des clés RSA :

1. **Générer la paire de clés privée/publique** :
   ```
   openssl genpkey -algorithm RSA -out private_key.pem -aes256
   ```

2. **Extraire la clé publique** :
   ```
   openssl rsa -pubout -in private_key.pem -out public_key.pem
   ```

#### Chiffrement et déchiffrement :

1. **Chiffrer un fichier avec la clé publique** :
   ```
   openssl rsautl -encrypt -pubin -inkey public_key.pem -in plaintext.txt -out encrypted_rsa.txt
   ```

2. **Déchiffrer un fichier avec la clé privée** :
   ```
   openssl rsautl -decrypt -inkey private_key.pem -in encrypted_rsa.txt -out decrypted_rsa.txt
   ```

### Chiffrement symétrique (AES) :

#### Génération de la clé AES :

1. **Générer la clé AES** :
   ```
   openssl rand -base64 32 > aes_key.txt
   ```

#### Chiffrement et déchiffrement :

1. **Chiffrer un fichier avec AES** :
   ```
   openssl enc -aes-256-cbc -salt -in plaintext.txt -out encrypted_aes.bin -pass file:aes_key.txt
   ```

2. **Déchiffrer un fichier avec AES** :
   ```
   openssl enc -d -aes-256-cbc -in encrypted_aes.bin -out decrypted_aes.txt -pass file:aes_key.txt
   ```

Assurez-vous de remplacer `plaintext.txt` par le nom de votre fichier contenant le texte en clair. Les fichiers de clés générés sont `private_key.pem` et `public_key.pem` pour RSA, et `aes_key.txt` pour AES. Les fichiers chiffrés seront respectivement `encrypted_rsa.txt` et `decrypted_rsa.txt` pour RSA, et `encrypted_aes.bin` et `decrypted_aes.txt` pour AES.


Chiffrement GUI : 

![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/d415ce51-f7e3-491d-a62e-0c855d7c178c)  

![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/9ae9ade4-59c4-4ef2-8fb3-1f4f7a17b3bb)  




**Hashage :*  
![image](https://github.com/yugmerabtene/DORANCO-AUDIT-PENTESTING-2024/assets/3670077/ec7c2ad8-29e7-48cf-9334-e476776d3f48)  

**Création d'un algo de hashage en Java utilisant l'algorithme SHA-256  :*  

```java
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

public class HashingAlgorithm {

    public static void main(String[] args) {
        String input = "Hello, world!"; // Texte à hasher
        
        try {
            // Création d'un objet MessageDigest avec l'algorithme SHA-256
            MessageDigest digest = MessageDigest.getInstance("SHA-256");
            
            // Calcul du hash
            byte[] hashedBytes = digest.digest(input.getBytes());
            
            // Conversion du hash en format hexadécimal
            StringBuilder hexString = new StringBuilder();
            for (byte hashedByte : hashedBytes) {
                String hex = Integer.toHexString(0xff & hashedByte);
                if (hex.length() == 1) hexString.append('0');
                hexString.append(hex);
            }
            
            // Affichage du hash
            System.out.println("Hash SHA-256 de '" + input + "' :");
            System.out.println(hexString.toString());
            
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        }
    }
}

```
**Hashage avec 7Zip, Winrar, Openssh, etc.. :*  

----

### Module 1: Introduction aux Audits et Réglementations

### A- Comprendre les principes généraux des audits de sécurité : 


| Étapes                        | Description                                                                                                                                               |
|-------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| Analyse des risques          | Identifier et évaluer les risques potentiels auxquels votre système informatique est exposé, en prenant en compte les aspects techniques, organisationnels et humains.                                           |
| Tests d’intrusion            | Évaluer la résistance de votre infrastructure informatique face aux attaques potentielles afin de détecter les vulnérabilités et de mesurer la robustesse des systèmes de sécurité.                                |
| Plan de continuité des activités | Prévoir des mesures spécifiques pour minimiser l'impact des interruptions sur vos activités en cas d'incident ou de défaillance, assurant ainsi la reprise rapide de vos opérations.                         |


### 1. Stratégie de sauvegarde

La mise en place d'une stratégie efficace de sauvegarde des données critiques est essentielle pour garantir la disponibilité et la sécurité des données. Voici quelques éléments clés à prendre en compte :

#### a. Choix des solutions de sauvegarde
Des solutions comme Bacula ou Duplicity offrent des fonctionnalités avancées pour la sauvegarde des données. Bacula est une solution de sauvegarde réseau multiplateforme, tandis que Duplicity est un outil de sauvegarde incrémentielle et chiffrée.

#### b. Planification des sauvegardes
Élaborez un calendrier de sauvegarde en fonction de la criticité des données. Les données critiques doivent être sauvegardées plus fréquemment, tandis que les données moins sensibles peuvent être sauvegardées moins fréquemment.

#### c. Stockage sécurisé des sauvegardes
Assurez-vous que les sauvegardes sont stockées dans des emplacements sécurisés, à l'abri des menaces physiques et numériques telles que les incendies, les inondations et les cyberattaques.

### 2. Plan de restauration

Un plan de restauration détaillé est crucial pour restaurer rapidement les données en cas de perte. Voici quelques points à considérer lors de l'élaboration d'un plan de restauration :

#### a. Identification des données critiques
Identifiez les données critiques qui doivent être restaurées en priorité en cas de sinistre. Cela peut inclure des bases de données, des fichiers de configuration système, ou d'autres données essentielles au fonctionnement de l'organisation.

#### b. Choix des solutions de restauration
Des solutions telles que Amanda ou Restic offrent des fonctionnalités avancées pour la restauration des données. Amanda est un système de sauvegarde réseau open-source, tandis que Restic est un outil de sauvegarde décentralisé avec prise en charge du chiffrement.

#### c. Test de la procédure de restauration
Il est essentiel de tester régulièrement la procédure de restauration pour s'assurer qu'elle fonctionne comme prévu en cas de besoin. Les tests de restauration permettent de détecter et de corriger les éventuelles lacunes dans le plan de restauration.

### Exemple de cas concret

Supposons une entreprise utilisant Bacula pour sauvegarder ses données critiques sur des serveurs locaux. Ils ont également élaboré un plan de restauration utilisant Restic pour restaurer rapidement les données en cas de sinistre.

1. L'équipe informatique planifie des sauvegardes quotidiennes des bases de données et des fichiers critiques.
2. Les sauvegardes sont stockées sur des serveurs distants sécurisés pour éviter les risques de perte de données en cas d'incident majeur sur site.
3. Un plan de restauration détaillé est élaboré, identifiant les données critiques à restaurer en priorité et les étapes à suivre pour effectuer la restauration.
4. Des tests réguliers de la procédure de restauration sont effectués pour garantir sa fiabilité et sa rapidité en cas de besoin.
5. En cas de sinistre, l'équipe informatique utilise le plan de restauration pour restaurer rapidement les données critiques, minimisant ainsi l'impact sur les opérations commercial

**TP-02:**  
Créer un systeme de sauvegarde en python ou avec baccuda sur deux serveur avec VirtualBox  

----

###B- Connaître les réglementations en matière de sécurité applicables :  



| Thème                                                       | Contenu                                                                                                                                                                                                                                                                                                                                                                                                               |
|-------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Importance de la réglementation de la sécurité informatique | La réglementation de la sécurité informatique a gagné en importance ces dernières années, non seulement comme un ensemble de contraintes administratives, mais aussi comme un levier stratégique pour assurer la sécurité de l'entreprise et la confiance des clients. Elle englobe plusieurs aspects, notamment la protection des données personnelles, les normes techniques et les réglementations spécifiques à certains secteurs. |
| Principales réglementations en vigueur                      | Les principales réglementations comprennent le RGPD pour la protection des données personnelles, les normes techniques telles que l'ISO 27001 pour la sécurité des systèmes d'information, ainsi que des réglementations spécifiques à certains secteurs, comme la santé ou la défense.                                                                                                                                                                         |
| Contexte et enjeux de la sécurité informatique              | Avec la digitalisation croissante des entreprises du BTP et des services, la sécurité informatique est devenue un enjeu majeur. Les cybercriminels ciblent les systèmes et les données sensibles, ce qui expose ces secteurs à diverses menaces telles que les virus, les ransomwares et le cyber-espionnage.                                                                                                            |
| Importance de l'ISO/IEC 27001                               | L'ISO/IEC 27001 offre un cadre de travail reconnu internationalement pour la gestion de la sécurité de l'information. Sa mise en conformité permet de rassurer les parties prenantes sur la capacité de l'entreprise à protéger ses données et à adopter une approche proactive en matière de sécurité informatique.                                                                                                       |
| Meilleures pratiques pour garantir la sécurité informatique | Une stratégie globale de sécurité informatique inclut un équipement de qualité, la formation continue des employés, une évaluation des risques régulière et une veille réglementaire. Ces pratiques aident à renforcer la sécurité de l'entreprise et à protéger ses données sensibles contre les menaces actuelles et émergentes.                                                                                        |


----


